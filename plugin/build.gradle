plugins {
    id 'com.gradle.plugin-publish' version '1.1.0'
}

configurations {
    functionalTestImplementation.extendsFrom testImplementation
}

repositories {
    mavenCentral()
}

dependencies {
    testImplementation 'org.assertj:assertj-core:3.21.0'
    testImplementation 'org.junit.jupiter:junit-jupiter:5.8.2'
}

testing {
    suites {
        functionalTest(JvmTestSuite)
    }
}

gradlePlugin {
    plugins {
        sshGradlePlugin {
            id = 'com.azmah.ssh.gradle'
            implementationClass = 'com.azmah.ssh.SshPlugin'
        }
    }
    testSourceSets sourceSets.functionalTest
}

check.dependsOn(functionalTest)

tasks.named('test') {
    useJUnitPlatform()
}
